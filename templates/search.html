{% extends 'layout.html' %}
{% set active_page = "search" %}
{% set title = "Travelers | Search" %}

{% block head %}
<link rel = 'import' href = '../static/bower_components/polymer/polymer.html'>
<link rel = 'import' href = '../static/bower_components/polymer/polymer.html'>
<link rel = "import" href = "../static/bower_components/paper-toast/paper-toast.html">
{% endblock %}

{% block body %}
<div class="extra-wide-container">
  <div class="search-bars">
    <form class="input-group search" id="basic-search" action="/search" method="GET">
      <span class="input-group-btn">
        <button class="btn btn-lg search-btn" id="basic-search-btn" type="submit"><i class="fas fa-search fa-lg"></i></button>
      </span>
      <input class="form-control input-lg search-input" type="text" name="q" placeholder="Search by destination..." {% if query|length != 0 %}value="{{ query }}"{% endif %}>
      <span class="input-group-btn">
        <button class="btn btn-lg search-btn" id="basic-search-btn" type="submit"><i class="fas fa-search fa-lg"></i></button>
      </span>
    </form>
    <form class="input-group search hidden" id="filter-search">
      <input class="form-control input-lg search-input" data-role="tagsinput" type="text" placeholder="Country">
      <span class="input-group-btn">
        <button id="adv-search-btn" class="btn btn-lg search-btn" type="button"><i class="fas fa-search fa-lg"></i></button >
      </span>
    </form>
  </div>
    <div class="box">
      <div class="no-results {% if destinations|length != 0 %}hidden{% endif %}">No destinations found for your search.</div>
      <div id="loading" class="hidden">
        <i class="fas loading-icon fa-circle-notch fa-spin"></i> <br>
      </div>
        <div class="item-group five-wide">
          {% for destination in destinations %}
            <div id ="dest{{ destination.DestID }}" class='item' style="background-image: linear-gradient(rgba(51, 64, 85, 0.40), rgba(51, 64, 85, 0.40)), url({{ destination.ImgUrl }});">
              <div class="item-header">
                {% if destination.DestID in explored %}
                  <i id="{{ destination.DestID }}" class="fas fa-check fa-lg exp-full" aria-hidden="true"></i> 
                {% else %}
                  <i id="{{ destination.DestID }}" class="fas fa-check fa-lg" aria-hidden="true"></i> 
                {% endif %}
                {% if destination.DestID in favorites %}
                  <i id="{{ destination.DestID }}" class="fas fa-star fa-lg star-full" aria-hidden="true"></i> 
                {% else %}
                  <i id="{{ destination.DestID }}" class="far fa-star fa-lg" aria-hidden="true"></i> 
                {% endif %}
              </div>
                <a href="/destination/{{ destination.DestID }}" class="item-mid">
                  <span class="item-title">{{ destination.DestName }}</span>
                </a>
                  <div class="item-footer">
                    <a href="/edit_destination/{{ destination.DestID }}">
                      <span class="fas fa-pencil-alt fa-lg" aria-hidden="true"></span>                             
                    </a>
                  </div>
            </div>
          {% endfor %}
        </div>
    </div>
</div>

<paper-toast id="toast"></paper-toast>

<script>
    var dests={{ destinations | safe }};
    var searchList = {{ searchList | safe }};
</script>
<script src="/static/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.js"></script>
<script src="/static/bower_components/bootstrap3-typeahead/bootstrap3-typeahead.js"></script>
<script src="/static/bower_components/fuse.js/dist/fuse.min.js"></script>
<script src="/static/js/search.js"></script>
<script src="/static/js/destinations.js"></script>

{% endblock %}
